# ==============================================================================
# config.mouse.yaml - Pipeline Configuration for Mouse (GRCm39) samples
# ==============================================================================
# Pre-configured for mouse RNA-seq analysis using GENCODE vM33 annotations
#
# Usage:
#   ./run_pipeline.sh -i data/fastq/ -o results/ -c config/config.mouse.yaml \
#       -m config/samples.tsv
#
# ==============================================================================

# ==============================================================================
# REFERENCE FILES
# ==============================================================================
reference:
  # Mouse reference genome (GRCm39 primary assembly)
  genome_fasta: "/data/resource/genomes/GRCm39.star/source/GRCm39.primary_assembly.genome.fa"

  # GENCODE vM33 gene annotation
  gtf: "/data/resource/genomes/GRCm39.star/source/gencode.vM33.primary_assembly.annotation.gtf"

  # Pre-built STAR genome index
  star_index: "/data/resource/genomes/GRCm39.star"

  # BED12 gene model for RSeQC
  gene_model_bed: "/data/resource/genomes/GRCm39.star/source/gencode.vM33.genes.bed12"

  # Organism for functional enrichment
  organism: "mouse"

# ==============================================================================
# INPUT/OUTPUT PATHS
# ==============================================================================
paths:
  input_dir: "data/fastq"
  output_dir: "results"
  log_dir: "logs"

# ==============================================================================
# SAMPLE INFORMATION
# ==============================================================================
samples:
  metadata: "config/samples.tsv"
  paired_end: true

# ==============================================================================
# FASTP - READ FILTERING
# ==============================================================================
fastp:
  qualified_quality_phred: 15
  length_required: 50
  trim_poly_x: true
  threads: 8

# ==============================================================================
# STAR - ALIGNMENT
# ==============================================================================
star:
  threads: 16
  outFilterMultimapNmax: 20
  alignSJoverhangMin: 8
  alignSJDBoverhangMin: 1
  outFilterMismatchNoverReadLmax: 0.04
  alignIntronMin: 20
  alignIntronMax: 1000000
  outReadsUnmapped: "Fastx"
  outFilterType: "BySJout"

# ==============================================================================
# FEATURECOUNTS - QUANTIFICATION
# ==============================================================================
featurecounts:
  feature_type: "exon"
  attribute_type: "gene_id"
  strand: 2  # Reverse stranded (typical for Illumina dUTP)
  count_multimapping: true
  fraction: true
  min_mapping_quality: 10
  threads: 8

# ==============================================================================
# EDGER - DIFFERENTIAL EXPRESSION
# ==============================================================================
edger:
  min_count: 10
  fdr_threshold: 0.05
  lfc_threshold: 1.0
  # Define your contrasts here (format: treatment-control)
  contrasts:
    - "LIPA-US"

# ==============================================================================
# GSEAPY - FUNCTIONAL ENRICHMENT
# ==============================================================================
gsea:
  gene_sets:
    - "MSigDB_Hallmark_2020"
  min_size: 15
  max_size: 500
  permutation_num: 1000
  fdr_threshold: 0.25
